<html>
  <head>
    <meta charset="UTF-8">
    <title>Widevine L3 Guessor 2024</title>
    <style>
      .hidden {
        display: none;
      }
      .container {
        display: flex;
        gap: 5px;
        align-items: center;
        margin-bottom: 3px;
      }
      #toggleHistory {
        margin-bottom: 8px;
      }
      #home {
        width: 550px;
      }
      #psshList, #requestList {
        word-wrap: break-word;
      }
    </style>
    <script src="pyodide/pyodide.js"></script>
  </head>
  <body>
    <div id="toggleHistory">
      <button id="historyButton">Show History</button>
    </div>
    <div id="noEME">
      Widevine content hasn't detected in this page. Open widevine-protected website and try again!
    </div>
    <div id="home" class="hidden">
      <form id="wvForm">
        <div class="container">
          <label for="pssh">PSSH:</label>
          <input type="text" id="pssh" style="flex: 1;" disabled>
          <input type="hidden" id="psshIndex">
          <input type="button" id="psshButton" value="Select">
        </div>
        <div class="container">
          <label for="license">License URL:</label>
          <input type="text" id="license" style="flex: 1;" disabled>
          <input type="hidden" id="licenseIndex">
          <input type="button" id="licenseButton" value="Select">
        </div>
        <div class="container">
          <label for="scheme">Challenge Scheme:</label>
          <select id="scheme">
            <option value="CommonWV">CommonWV</option>
            <option value="Amazon">Amazon</option>
            <option value="Comcast">Comcast Xfinity</option>
            <option value="DRMToday">DRMToday</option>
            <option value="GlobalTV">GlobalTV</option>
            <option value="NosTV">NosTV</option>
            <option value="Polsat">Polsat</option>
            <option value="RedBee">Red Bee Media</option>
            <option value="thePlatform">thePlatform</option>
            <option value="Youku">Youku</option>
          </select>
          <input type="button" id="guess" value="Guess!">
        </div>
        <div class="container">
          <textarea id="result" rows="5" style="flex: 1;"></textarea>
        </div>
      </form>
    </div>
    <div id="ckHome" class="hidden">
      <h3>Clearkey detected</h3>
      <div class="container">
        <textarea id="ckResult" rows="5" style="flex: 1;"></textarea>
      </div>
    </div>
    <div id="selectPssh" class="hidden">
      <input type="text" id="psshSearch" placeholder="Search">
      <ul id="psshList"></ul>
    </div>
    <div id="selectRequest" class="hidden">
      <input type="text" id="requestSearch" placeholder="Search">
      <ul id="requestList"></ul>
    </div>
    <div id="history" class="hidden">
      <button id="backHistory">üîô Back</button>
      <button id="saveHistory">üíæ Save History</button>
      <button id="clearHistory">‚ùå Clear History</button>
      <div id="histDisp"></div>
    </div>
    <div id="updateNotice" class="hidden">
      Version =VER= update available!
      <a href="https://github.com/FoxRefire/wvg/archive/=HASH=.zip">Download</a>
    </div>
  </body>
  <script src="popup.js" type="module"></script>
  <script src="popup_drawList.js"></script>
  <script src="jsonview.js"></script>
  <script src="popup_showHistory.js"></script>
  <script src="popup_updateNotice.js"></script>
</html>